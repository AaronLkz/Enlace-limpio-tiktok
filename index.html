<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Enlace limpio TikTok</title>
</head>
<body>
  <h2>Procesando enlace…</h2>

  <script>
    const params = new URLSearchParams(window.location.search);
    const original = params.get("url");

    if (!original) {
      document.body.innerHTML = "<h3>Error: No se encontró ningún enlace.</h3>";
    } else {
      // Redirige al enlace pero con el truco del modo escritorio y sin popup
      if (original.includes("vm.tiktok.com")) {
        // TikTok hace redirección automáticamente al abrir el vm.tiktok.com
        window.location.href = original;
      } else if (original.includes("tiktok.com")) {
        // Quitar parámetros que fuerzan login
        let cleanURL = original.split("?")[0];
        // Forzar modo web para evitar abrir en app
        if (!cleanURL.includes("www.tiktok.com")) {
          cleanURL = cleanURL.replace("m.tiktok.com", "www.tiktok.com");
        }
        window.location.href = cleanURL;
      } else {
        document.body.innerHTML = "<h3>Enlace no válido de TikTok.</h3>";
      }
    }
  </script>
</body>
</html>